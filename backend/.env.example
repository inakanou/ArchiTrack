# ============================================
# ArchiTrack Backend Environment Variables
# ============================================

# --------------------------------------------
# Server Configuration
# --------------------------------------------
# Port number for the HTTP server
# DEFAULT: 3000
# REQUIRED: No (uses default if not set)
PORT=3000

# Node environment (development | production | test)
# DEFAULT: development
# REQUIRED: No (uses default if not set)
NODE_ENV=development

# Log level (trace | debug | info | warn | error | fatal)
# DEFAULT: info in production, debug in development
# REQUIRED: No (uses default if not set)
LOG_LEVEL=debug

# --------------------------------------------
# Database Configuration
# --------------------------------------------
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
#
# For Docker Compose: use service name 'postgres'
#   DATABASE_URL=postgresql://postgres:dev@postgres:5432/architrack_dev
#
# For local development: use 'localhost'
#   DATABASE_URL=postgresql://postgres:dev@localhost:5432/architrack_dev
#
# For Railway/Production: use the provided DATABASE_URL from Railway
#   DATABASE_URL=${{Postgres.DATABASE_URL}}
#
# REQUIRED: No (optional, but database features will be disabled without it)
DATABASE_URL=postgresql://postgres:dev@postgres:5432/architrack_dev

# Database connection timeout in milliseconds (default: 5000ms)
# REQUIRED: No (uses default if not set)
DATABASE_CONNECTION_TIMEOUT=5000

# Database connection retry count (0-10, default: 3)
# REQUIRED: No (uses default if not set)
DATABASE_RETRY_COUNT=3

# --------------------------------------------
# Redis Configuration
# --------------------------------------------
# Redis connection string
# Format: redis://HOST:PORT
#
# For Docker Compose: use service name 'redis'
#   REDIS_URL=redis://redis:6379
#
# For local development: use 'localhost'
#   REDIS_URL=redis://localhost:6379
#
# For Railway/Production: use the provided REDIS_URL from Railway
#   REDIS_URL=${{Redis.REDIS_URL}}
#
# REQUIRED: No (optional, rate limiting will fall back to memory store)
REDIS_URL=redis://redis:6379

# --------------------------------------------
# CORS Configuration
# --------------------------------------------
# Frontend URL for CORS configuration
# This URL will be allowed to make requests to the backend
#
# For local development:
#   FRONTEND_URL=http://localhost:5173
#
# For production:
#   FRONTEND_URL=https://your-frontend.railway.app
#
# DEFAULT: http://localhost:5173
# REQUIRED: No (uses default if not set)
FRONTEND_URL=http://localhost:5173

# --------------------------------------------
# JWT Authentication Configuration
# --------------------------------------------
# EdDSA (Ed25519) public and private keys for JWT signing
# Generate these using: npx tsx scripts/generate-eddsa-keys.ts
#
# Format: Base64-encoded JWK (JSON Web Key)
# The script will output these values to .env.keys
#
# REQUIRED: Yes (for authentication features)
# JWT_PUBLIC_KEY=<base64-encoded-public-jwk>
# JWT_PRIVATE_KEY=<base64-encoded-private-jwk>
#
# Optional: Old public key for grace period during key rotation (30 days)
# JWT_PUBLIC_KEY_OLD=<base64-encoded-old-public-jwk>

# Access token expiry (default: 15m)
# Format: time string (e.g., 15m, 1h, 7d)
# REQUIRED: No (uses default if not set)
ACCESS_TOKEN_EXPIRY=15m

# Refresh token expiry (default: 7d)
# Format: time string (e.g., 7d, 30d)
# REQUIRED: No (uses default if not set)
REFRESH_TOKEN_EXPIRY=7d

# --------------------------------------------
# Two-Factor Authentication (2FA) Configuration
# --------------------------------------------
# AES-256-GCM encryption key for 2FA secrets (256 bits = 64 hex characters)
# Generate using: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# REQUIRED: Yes (when 2FA features are enabled)
# TWO_FACTOR_ENCRYPTION_KEY=<64-character-hex-string>

# --------------------------------------------
# Initial Admin Account Configuration
# --------------------------------------------
# Initial administrator account for the first setup
# These values are only used if no admin account exists
#
# REQUIRED: No (optional, but recommended for automated setups)
# INITIAL_ADMIN_EMAIL=admin@example.com
# INITIAL_ADMIN_PASSWORD=<strong-password-12-chars-min>
# INITIAL_ADMIN_DISPLAY_NAME=System Administrator

# --------------------------------------------
# Monitoring & Alerts (Sentry)
# --------------------------------------------
# Sentry DSN for error tracking and performance monitoring
# Get this from your Sentry project settings
#
# REQUIRED: No (optional, but highly recommended for production)
# SENTRY_DSN=https://examplePublicKey@o0.ingest.sentry.io/0

# --------------------------------------------
# Railway Configuration (Production)
# --------------------------------------------
# These are automatically set by Railway, do not set manually
# RAILWAY_ENVIRONMENT=production
# RAILWAY_SERVICE_NAME=backend

# --------------------------------------------
# CI/CD Configuration
# --------------------------------------------
# Set to 'true' when running in CI environment
# CI=true
