echo "ğŸ” Running type checks before push..."

# Backend type check
if [ -d "backend" ]; then
  echo "ğŸ” Checking backend types..."
  npm --prefix backend run type-check
  if [ $? -ne 0 ]; then
    echo "âŒ Backend type check failed. Push aborted."
    exit 1
  fi
fi

# Frontend type check
if [ -d "frontend" ]; then
  echo "ğŸ” Checking frontend types..."
  npm --prefix frontend run type-check
  if [ $? -ne 0 ]; then
    echo "âŒ Frontend type check failed. Push aborted."
    exit 1
  fi
fi

# E2E type check
echo "ğŸ” Checking E2E types..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ E2E type check failed. Push aborted."
  exit 1
fi

# E2Eãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
# ãƒ—ãƒƒã‚·ãƒ¥å‰ã«æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãã ã•ã„
echo "ğŸ§ª Running E2E tests..."
npm run test:e2e
if [ $? -ne 0 ]; then
  echo "âŒ E2E tests failed. Push aborted."
  exit 1
fi

echo "âœ… All checks passed!"
